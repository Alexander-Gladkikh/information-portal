"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[332],{9332:function(e,a,r){r.r(a),r.d(a,{default:function(){return I}});var t=r(2327),s=r(743),n=r(7294),o=r(3007),c=r(5255),l=r(8312),u=r(1715),d=r(1233),i=r(5401);const m=e=>e?.loginForm?.username||"",g=e=>e?.loginForm?.password||"",f=e=>e?.loginForm?.isLoading||!1,h=e=>e?.loginForm?.error;var p=r(4268),v=r(4420),x=r(1283);const j=(0,p.hg)("login/loginByUsername",(async(e,a)=>{const{extra:r,dispatch:t,rejectWithValue:s}=a;try{const a=await r.api.post("/login",e);if(!a.data)throw new Error;return localStorage.setItem(x.z,JSON.stringify(a.data)),t(v.hI.setAuthData(a.data)),a.data}catch(e){return console.log(e),s("error")}})),y=(0,p.oM)({name:"login",initialState:{isLoading:!1,username:"",password:""},reducers:{setUsername:(e,a)=>{e.username=a.payload},setPassword:(e,a)=>{e.password=a.payload}},extraReducers:e=>{e.addCase(j.pending,(e=>{e.error=void 0,e.isLoading=!0})).addCase(j.fulfilled,(e=>{e.isLoading=!1})).addCase(j.rejected,((e,a)=>{e.isLoading=!1,e.error=a.payload}))}}),{actions:N}=y,{reducer:C}=y;var w="WvK8oNvc",F=r(5893);const b={loginForm:C};var I=(0,n.memo)((e=>{let{className:a,onSuccess:r}=e;const{t:p}=(0,t.$)(),v=(0,i.T)(),x=(0,s.v9)(m),y=(0,s.v9)(g),C=(0,s.v9)(f),I=(0,s.v9)(h),L=(0,n.useCallback)((e=>{v(N.setUsername(e))}),[v]),S=(0,n.useCallback)((e=>{v(N.setPassword(e))}),[v]),k=(0,n.useCallback)((async()=>{"fulfilled"===(await v(j({username:x,password:y}))).meta.requestStatus&&r()}),[v,y,x,r]);return(0,F.jsx)(d.W,{removeAfterUnmount:!0,reducers:b,children:(0,F.jsxs)("div",{className:(0,o.A)("bnkJ9osQ",{},[a]),children:[(0,F.jsx)(u.xv,{title:p("Форма авторизации")}),I&&(0,F.jsx)(u.xv,{text:p("Вы ввели неверный логин или пароль"),theme:u.lg.ERROR}),(0,F.jsx)(l.I,{autofocus:!0,type:"text",className:w,placeholder:p("Введите username"),onChange:L,value:x}),(0,F.jsx)(l.I,{type:"text",className:w,placeholder:p("Введите пароль"),onChange:S,value:y}),(0,F.jsx)(c.zx,{theme:c.bn.OUTLINE,className:"TxJDFmF6",onClick:k,disabled:C,children:p("Войти")})]})})}))},1233:function(e,a,r){r.d(a,{W:function(){return o}});var t=r(7294),s=r(743),n=r(5893);const o=e=>{const{children:a,reducers:r,removeAfterUnmount:o=!0}=e,c=(0,s.oR)(),l=(0,s.I0)();return(0,t.useEffect)((()=>{const e=c.reducerManager.getMountedReducers();return Object.entries(r).forEach((a=>{let[r,t]=a;e[r]||(c.reducerManager.add(r,t),l({type:`@INIT ${r} reducer`}))})),()=>{o&&Object.entries(r).forEach((e=>{let[a,r]=e;c.reducerManager.remove(a),l({type:`@DESTROY ${a} reducer`})}))}}),[]),(0,n.jsx)(n.Fragment,{children:a})}},8312:function(e,a,r){r.d(a,{I:function(){return o}});var t=r(7294),s=r(3007),n=r(5893);const o=(0,t.memo)((e=>{const{className:a,value:r,onChange:o,type:c="text",placeholder:l,autofocus:u,readonly:d,...i}=e,m=(0,t.useRef)(null),[g,f]=(0,t.useState)(!1),[h,p]=(0,t.useState)(0),v=g&&!d;(0,t.useEffect)((()=>{u&&(f(!0),m.current?.focus())}),[u]);const x={fTN1PnWu:d};return(0,n.jsxs)("div",{className:(0,s.A)("LuFDUWoP",x,[a]),children:[l&&(0,n.jsx)("div",{className:"emAQQ85i",children:`${l}>`}),(0,n.jsxs)("div",{className:"y1GiFC_L",children:[(0,n.jsx)("input",{ref:m,type:c,value:r,onChange:e=>{o?.(e.target.value),p(e.target.value.length)},className:"LVdIPwcx",onFocus:()=>{f(!0)},onBlur:()=>{f(!1)},onSelect:e=>{p(e?.target?.selectionStart||0)},readOnly:d,...i}),v&&(0,n.jsx)("span",{className:"lqMFGBuL",style:{left:9*h+"px"}})]})]})}))}}]);